webpackJsonp([11],{106:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(13),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};t.default={data:function(){return{user:{},step:1,valid1:!1,valid2:!1,passwordValid:!1,login:"",show1:!1,show2:!1,password:"",loading:!1,err:[],alert:{enable:!1,message:""},type:"success",confrim_password:"",loginRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=15||"Name must be less than 15 characters"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"}]}},methods:r({},Object(a.b)({SetToken:"user/SetToken"}),{BackWindow:function(){this.step--,this.valid=!0},NextWindow:function(){var e=this;this.loading=!0,this.alert={},1==this.step?axios.post("/api/auth/email",{email:this.user.email}).then(function(t){e.step++,e.loading=!1}).catch(function(t){e.alert.message=t.response.data.error,e.alert.enable=!0,e.loading=!1}):2==this.step&&axios.post("/api/auth/signup",this.user).then(function(t){axios.post("/api/auth/login",{email:e.user.email,password:e.user.password,remember_me:!0}).then(function(t){e.loading=!1,e.SetToken(t.data),e.step++,setTimeout(function(){e.$router.push("/app")},5e3)})}).catch(function(t){Object.keys(t.response.data.errors).forEach(function(s){t.response.data.errors[s].forEach(function(t){var s={};s.message=t,s.alert=!0,e.loading=!1,init.err.push(s)})}),console.log(t.response.data.errors)}),this.valid=!1,this.loading=!1}}),computed:{currentTitle:function(){switch(this.step){case 1:return"E-mail";case 2:return"Логин и пароль";default:return"Учётная запись создана"}},checkValid:function(){return 3===this.step||(1==this.step&&0==this.valid1||2==this.step&&0==this.valid2)}}}},107:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:"","fill-height":""}},[s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{dark:"",color:"primary"}},[s("v-toolbar-title",[e._v("Регистрация")]),e._v(" "),s("v-spacer")],1),e._v(" "),s("v-card-title",{staticClass:"title font-weight-regular justify-space-between"},[s("span",[e._v(e._s(e.currentTitle))]),e._v(" "),s("v-avatar",{staticClass:"subheading secondary white--text",attrs:{color:"primary lighten-2",size:"24"},domProps:{textContent:e._s(e.step)}})],1),e._v(" "),s("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[s("v-window-item",{attrs:{value:1}},[s("v-card-text",[s("v-alert",{attrs:{type:"error",dismissible:""},model:{value:e.alert.enable,callback:function(t){e.$set(e.alert,"enable",t)},expression:"alert.enable"}},[e._v(e._s(e.alert.message))]),e._v(" "),s("v-form",{ref:"form",model:{value:e.valid1,callback:function(t){e.valid1=t},expression:"valid1"}},[s("v-text-field",{attrs:{outline:"",label:"E-mail","append-icon":"mail",required:"",rules:e.emailRules},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),e._v(" "),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("\n                                    Указанный почтовый адрес будет использован для создания учётной записи\n                                ")])],1)],1)],1),e._v(" "),s("v-window-item",{attrs:{value:2}},[s("v-card-text",[s("v-alert",{attrs:{type:"error",dismissible:""},model:{value:e.alert.enable,callback:function(t){e.$set(e.alert,"enable",t)},expression:"alert.enable"}},[e._v(e._s(e.alert.message))]),e._v(" "),e._l(e.err,function(t,a){return s("v-alert",{key:a,attrs:{type:"error",dismissible:""},model:{value:t.alert,callback:function(s){e.$set(t,"alert",s)},expression:"error.alert"}},[e._v(e._s(t.message))])}),e._v(" "),s("v-form",{ref:"form",model:{value:e.valid2,callback:function(t){e.valid2=t},expression:"valid2"}},[s("v-text-field",{attrs:{outline:"",label:"Login","append-icon":"person",required:"",rules:e.loginRules},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),e._v(" "),s("v-text-field",{attrs:{outline:"",label:"Password","append-icon":e.show1?"visibility_off":"visibility",type:e.show1?"text":"password",required:"",rules:e.passwordRules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),e._v(" "),s("v-text-field",{attrs:{outline:"",label:"Confrim","append-icon":e.show2?"visibility_off":"visibility",type:e.show2?"text":"password",required:"",rules:e.passwordRules},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.user.password_confirmation,callback:function(t){e.$set(e.user,"password_confirmation",t)},expression:"user.password_confirmation"}}),e._v(" "),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("\n                                    Введите логин и пароль для вашего аккаунта\n                                ")])],1)],2)],1),e._v(" "),s("v-window-item",{attrs:{value:3}},[s("div",{staticClass:"pa-3 text-xs-center"},[s("h3",{staticClass:"title font-weight-light mb-2"},[e._v("Добро пожаловать!")]),e._v(" "),s("span",{staticClass:"caption grey--text"},[e._v("Спасибо за регистрацию!")])])])],1),e._v(" "),s("v-divider"),e._v(" "),s("v-card-actions",[s("v-btn",{attrs:{to:{name:"login"},flat:"",color:"primary"}},[e._v("\n                        Вход\n                    ")]),e._v(" "),s("v-btn",{attrs:{disabled:1===e.step,flat:"",color:"primary"},on:{click:e.BackWindow}},[e._v("\n                        Назад\n                    ")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{attrs:{disabled:e.checkValid,color:"primary",depressed:"",loading:e.loading},on:{click:e.NextWindow}},[e._v("\n                        Далее\n                    ")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},152:function(e,t,s){var a=s(92)(s(106),s(107),!1,null,null,null);e.exports=a.exports},92:function(e,t){e.exports=function(e,t,s,a,r,n){var i,o=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(i=e,o=e.default);var c,u="function"==typeof o?o.options:o;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),s&&(u.functional=!0),r&&(u._scopeId=r),n?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},u._ssrRegister=c):a&&(c=a),c){var d=u.functional,p=d?u.render:u.beforeCreate;d?(u._injectStyles=c,u.render=function(e,t){return c.call(t),p(e,t)}):u.beforeCreate=p?[].concat(p,c):[c]}return{esModule:i,exports:o,options:u}}}});